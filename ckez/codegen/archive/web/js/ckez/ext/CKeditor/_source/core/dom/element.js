CKEDITOR.dom.element=function(b,a){if(typeof b=="string"){b=(a?a.$:document).createElement(b)}CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.element.get=function(a){return a&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node();CKEDITOR.dom.element.createFromHtml=function(c,b){var a=new CKEDITOR.dom.element("div",b);a.setHtml(c);return a.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(e,b,a,d){var f=b.getCustomData("list_marker_id")||(b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id")),c=b.getCustomData("list_marker_names")||(b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names"));e[f]=b;c[a]=1;return b.setCustomData(a,d)};CKEDITOR.dom.element.clearAllMarkers=function(b){for(var a in b){CKEDITOR.dom.element.clearMarkers(b,b[a],1)}};CKEDITOR.dom.element.clearMarkers=function(c,b,e){var d=b.getCustomData("list_marker_names"),f=b.getCustomData("list_marker_id");for(var a in d){b.removeCustomData(a)}b.removeCustomData("list_marker_names");if(e){b.removeCustomData("list_marker_id");delete c[f]}};CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var d=this.$.className;if(d){var b=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");if(!b.test(d)){d+=" "+a}}this.$.className=d||a},removeClass:function(a){var d=this.getAttribute("class");if(d){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");if(b.test(d)){d=d.replace(b,"").replace(/^\s+/,"");if(d){this.setAttribute("class",d)}else{this.removeAttribute("class")}}}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(b,a){if(typeof b=="string"){b=this.getDocument().createElement(b)}if(a){this.$.insertBefore(b.$,this.$.firstChild)}else{this.$.appendChild(b.$)}return b},appendHtml:function(b){if(!this.$.childNodes.length){this.setHtml(b)}else{var a=new CKEDITOR.dom.element("div",this.getDocument());a.setHtml(b);a.moveChildren(this)}},appendText:function(a){if(this.$.text!=undefined){this.$.text+=a}else{this.append(new CKEDITOR.dom.text(a))}},appendBogus:function(){var b=this.getLast();while(b&&b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(b.getText())){b=b.getPrevious()}if(!b||!b.is||!b.is("br")){var a=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br");CKEDITOR.env.gecko&&a.setAttribute("type","_moz");this.append(a)}},breakParent:function(c){var a=new CKEDITOR.dom.range(this.getDocument());a.setStartAfter(this);a.setEndAfter(c);var b=a.extractContents();a.insertNode(this.remove());b.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return !!(this.$.compareDocumentPosition(a.$)&16)},focus:(function(){function a(){try{this.$.focus()}catch(b){}}return function(b){if(b){CKEDITOR.tools.setTimeout(a,100,this)}else{a.call(this)}}})(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(true));return a.innerHTML},setHtml:function(a){return(this.$.innerHTML=a)},setText:function(a){CKEDITOR.dom.element.prototype.setText=(this.$.innerText!=undefined)?function(b){return this.$.innerText=b}:function(b){return this.$.textContent=b};return this.setText(a)},getAttribute:(function(){var a=function(b){return this.$.getAttribute(b,2)};if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){return function(d){switch(d){case"class":d="className";break;case"http-equiv":d="httpEquiv";break;case"name":return this.$.name;case"tabindex":var c=a.call(this,d);if(c!==0&&this.$.tabIndex===0){c=null}return c;break;case"checked":var b=this.$.attributes.getNamedItem(d),e=b.specified?b.nodeValue:this.$.checked;return e?"checked":null;case"hspace":case"value":return this.$[d];case"style":return this.$.style.cssText}return a.call(this,d)}}else{return a}})(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;if(a===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0){a=-1}return a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;if(a==undefined){a=parseInt(this.getAttribute("tabindex"),10);if(isNaN(a)){a=-1}}return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var b=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var a=this.$.scopeName;if(a!="HTML"){b=a.toLowerCase()+":"+b}}return(this.getName=function(){return b})()},getValue:function(){return this.$.value},getFirst:function(c){var b=this.$.firstChild,a=b&&new CKEDITOR.dom.node(b);if(a&&c&&!c(a)){a=a.getNext(c)}return a},getLast:function(c){var b=this.$.lastChild,a=b&&new CKEDITOR.dom.node(b);if(a&&c&&!c(a)){a=a.getPrevious(c)}return a},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();for(var b=0;b<arguments.length;b++){if(arguments[b]==a){return true}}return false},isEditable:function(){if(this.isReadOnly()){return false}var a=this.getName();var b=!CKEDITOR.dtd.$nonEditable[a]&&(CKEDITOR.dtd[a]||CKEDITOR.dtd.span);return(b&&b["#"])},isIdentical:function(b){if(this.getName()!=b.getName()){return false}var g=this.$.attributes,f=b.$.attributes;var d=g.length,a=f.length;for(var c=0;c<d;c++){var e=g[c];if(e.nodeName=="_moz_dirty"){continue}if((!CKEDITOR.env.ie||(e.specified&&e.nodeName!="data-cke-expando"))&&e.nodeValue!=b.getAttribute(e.nodeName)){return false}}if(CKEDITOR.env.ie){for(c=0;c<a;c++){e=f[c];if(e.specified&&e.nodeName!="data-cke-expando"&&e.nodeValue!=this.getAttribute(e.nodeName)){return false}}}return true},isVisible:function(){var b=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",a,c;if(b&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)){a=this.getWindow();if(!a.equals(CKEDITOR.document.getWindow())&&(c=a.$.frameElement)){b=new CKEDITOR.dom.element(c).isVisible()}}return b},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return false}var b=this.getChildren();for(var a=0,c=b.count();a<c;a++){var d=b.getItem(a);if(d.type==CKEDITOR.NODE_ELEMENT&&d.data("cke-bookmark")){continue}if(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())){return false}}return true},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){var a=this.$.attributes;for(var b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class")){return true}case"data-cke-expando":continue;default:if(c.specified){return true}}}return false}:function(){var a=this.$.attributes,c=a.length;var b={"data-cke-expando":1,_moz_dirty:1};return c>0&&(c>2||!b[a[0].nodeName]||(c==2&&!b[a[1].nodeName]))},hasAttribute:(function(){function a(b){var c=this.$.attributes.getNamedItem(b);return !!(c&&c.specified)}return(CKEDITOR.env.ie&&CKEDITOR.env.version<8)?function(b){if(b=="name"){return !!this.$.name}return a.call(this,b)}:a})(),hide:function(){this.setStyle("display","none")},moveChildren:function(c,a){var b=this.$;c=c.$;if(b==c){return}var d;if(a){while((d=b.lastChild)){c.insertBefore(b.removeChild(d),c.firstChild)}}else{while((d=b.firstChild)){c.appendChild(b.removeChild(d))}}},mergeSiblings:(function(){function a(b,c,d){if(c&&c.type==CKEDITOR.NODE_ELEMENT){var e=[];while(c.data("cke-bookmark")||c.isEmptyInlineRemoveable()){e.push(c);c=d?c.getNext():c.getPrevious();if(!c||c.type!=CKEDITOR.NODE_ELEMENT){return}}if(b.isIdentical(c)){var f=d?b.getLast():b.getFirst();while(e.length){e.shift().move(b,!d)}c.moveChildren(b,!d);c.remove();if(f&&f.type==CKEDITOR.NODE_ELEMENT){f.mergeSiblings()}}}}return function(b){if(!(b===false||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))){return}a(this,this.getNext(),true);a(this,this.getPrevious())}})(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:(function(){var a=function(b,c){this.$.setAttribute(b,c);return this};if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){return function(b,c){if(b=="class"){this.$.className=c}else{if(b=="style"){this.$.style.cssText=c}else{if(b=="tabindex"){this.$.tabIndex=c}else{if(b=="checked"){this.$.checked=c}else{a.apply(this,arguments)}}}}return this}}else{return a}})(),setAttributes:function(b){for(var a in b){this.setAttribute(a,b[a])}return this},setValue:function(a){this.$.value=a;return this},removeAttribute:(function(){var a=function(b){this.$.removeAttribute(b)};if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){return function(b){if(b=="class"){b="className"}else{if(b=="tabindex"){b="tabIndex"}}a.call(this,b)}}else{return a}})(),removeAttributes:function(b){if(CKEDITOR.tools.isArray(b)){for(var c=0;c<b.length;c++){this.removeAttribute(b[c])}}else{for(var a in b){b.hasOwnProperty(a)&&this.removeAttribute(a)}}},removeStyle:function(a){this.setStyle(a,"");if(this.$.style.removeAttribute){this.$.style.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a))}if(!this.$.style.cssText){this.removeAttribute("style")}},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a){this.setStyle(b,a[b])}return this},setOpacity:function(a){if(CKEDITOR.env.ie){a=Math.round(a*100);this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")}else{this.setStyle("opacity",a)}},unselectable:CKEDITOR.env.gecko?function(){this.$.style.MozUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:CKEDITOR.env.webkit?function(){this.$.style.KhtmlUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(CKEDITOR.env.ie||CKEDITOR.env.opera){var b=this.$,c,a=0;b.unselectable="on";while((c=b.all[a++])){switch(c.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:c.unselectable="on"}}}},getPositionedAncestor:function(){var a=this;while(a.getName()!="html"){if(a.getComputedStyle("position")!="static"){return a}a=a.getParent()}return null},getDocumentPosition:function(f){var i=0,g=0,k=this.getDocument().getBody(),p=this.getDocument().$.compatMode=="BackCompat";var u=this.getDocument();if(document.documentElement.getBoundingClientRect){var j=this.$.getBoundingClientRect(),d=u.$,r=d.documentElement;var m=r.clientTop||k.$.clientTop||0,t=r.clientLeft||k.$.clientLeft||0,q=true;if(CKEDITOR.env.ie){var s=u.getDocumentElement().contains(this),h=u.getBody().contains(this);q=(p&&h)||(!p&&s)}if(q){i=j.left+(!p&&r.scrollLeft||k.$.scrollLeft);i-=t;g=j.top+(!p&&r.scrollTop||k.$.scrollTop);g-=m}}else{var n=this,b=null,a;while(n&&!(n.getName()=="body"||n.getName()=="html")){i+=n.$.offsetLeft-n.$.scrollLeft;g+=n.$.offsetTop-n.$.scrollTop;if(!n.equals(this)){i+=(n.$.clientLeft||0);g+=(n.$.clientTop||0)}var c=b;while(c&&!c.equals(n)){i-=c.$.scrollLeft;g-=c.$.scrollTop;c=c.getParent()}b=n;n=(a=n.$.offsetParent)?new CKEDITOR.dom.element(a):null}}if(f){var e=this.getWindow(),l=f.getWindow();if(!e.equals(l)&&e.$.frameElement){var o=(new CKEDITOR.dom.element(e.$.frameElement)).getDocumentPosition(f);i+=o.x;g+=o.y}}if(!document.documentElement.getBoundingClientRect){if(CKEDITOR.env.gecko&&!p){i+=this.$.clientLeft?1:0;g+=this.$.clientTop?1:0}}return{x:i,y:g}},scrollIntoView:function(d){var e=this.getWindow(),b=e.getViewPaneSize().height;var f=b*-1;if(d){f+=b}else{f+=this.$.offsetHeight||0;f+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0}var c=this.getDocumentPosition();f+=c.y;f=f<0?0:f;var a=e.getScrollPosition().y;if(f>a||f<a-b){e.$.scrollTo(0,f)}},setState:function(a){switch(a){case CKEDITOR.TRISTATE_ON:this.addClass("cke_on");this.removeClass("cke_off");this.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass("cke_disabled");this.removeClass("cke_off");this.removeClass("cke_on");break;default:this.addClass("cke_off");this.removeClass("cke_on");this.removeClass("cke_disabled");break}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src;if(CKEDITOR.env.ie&&CKEDITOR.env.version<7){window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(b,e){var a=this.$.attributes;e=e||{};for(var g=0;g<a.length;g++){var d=a[g];var c=d.nodeName.toLowerCase(),f;if(c in e){continue}if(c=="checked"&&(f=this.getAttribute(c))){b.setAttribute(c,f)}else{if(d.specified||(CKEDITOR.env.ie&&d.nodeValue&&c=="value")){f=this.getAttribute(c);if(f===null){f=d.nodeValue}b.setAttribute(c,f)}}}if(this.$.style.cssText!==""){b.$.style.cssText=this.$.style.cssText}},renameNode:function(b){if(this.getName()==b){return}var c=this.getDocument();var a=new CKEDITOR.dom.element(b,c);this.copyAttributes(a);this.moveChildren(a);this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$},getChild:function(b){var a=this.$;if(!b.slice){a=a.childNodes[b]}else{while(b.length>0&&a){a=a.childNodes[b.shift()]}}return a?new CKEDITOR.dom.node(a):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){if(!a.data.getTarget().hasClass("cke_enable_context_menu")){a.data.preventDefault()}})},getDirection:function(a){return a?this.getComputedStyle("direction"):this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a="data-"+a;if(b===undefined){return this.getAttribute(a)}else{if(b===false){this.removeAttribute(a)}else{this.setAttribute(a,b)}}return null}});(function(){var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};function a(f){var d=0;for(var e=0,c=b[f].length;e<c;e++){d+=parseInt(this.getComputedStyle(b[f][e])||0,10)||0}return d}CKEDITOR.dom.element.prototype.setSize=function(d,c,e){if(typeof c=="number"){if(e&&!(CKEDITOR.env.ie&&CKEDITOR.env.quirks)){c-=a.call(this,d)}this.setStyle(d,c+"px")}};CKEDITOR.dom.element.prototype.getSize=function(d,e){var c=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(d)],this.$["client"+CKEDITOR.tools.capitalize(d)])||0;if(e){c-=a.call(this,d)}return c}})();