CKEDITOR.dialog.add("docProps",function(j){var d=j.lang.docprops,h=j.lang.common,c={};function l(q,r){var p=function(){n(this);r(this,this._.parentDialog)};var n=function(s){s.removeListener("ok",p);s.removeListener("cancel",n)};var o=function(s){s.on("ok",p);s.on("cancel",n)};j.execCommand(q);if(j._.storedDialogs.colordialog){o(j._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(t){if(t.data.name!=q){return}var s=t.data.definition;t.removeListener();s.onLoad=CKEDITOR.tools.override(s.onLoad,function(u){return function(){o(this);s.onLoad=u;if(typeof u=="function"){u.call(this)}}})})}}function e(){var o=this.getDialog(),n=o.getContentElement("general",this.id+"Other");if(!n){return}if(this.getValue()=="other"){n.getInputElement().removeAttribute("readOnly");n.focus();n.getElement().removeClass("cke_disabled")}else{n.getInputElement().setAttribute("readOnly",true);n.getElement().addClass("cke_disabled")}}function k(n,o,p){return function(u,r,q){var t=c,v=typeof p!="undefined"?p:this.getValue();if(!v&&(n in t)){t[n].remove()}else{if(v&&(n in t)){t[n].setAttribute("content",v)}else{if(v){var s=new CKEDITOR.dom.element("meta",j.document);s.setAttribute(o?"http-equiv":"name",n);s.setAttribute("content",v);q.append(s)}}}}}function m(o,n){return function(){var q=c,p=(o in q)?q[o].getAttribute("content")||"":"";if(n){return p}this.setValue(p);return null}}function b(n){return function(r,q,p,o){o.removeAttribute("margin"+n);var s=this.getValue();if(s!==""){o.setStyle("margin-"+n,CKEDITOR.tools.cssLength(s))}else{o.removeStyle("margin-"+n)}}}function g(r){var q={},s=r.getElementsByTag("meta"),o=s.count();for(var n=0;n<o;n++){var p=s.getItem(n);q[p.getAttribute(p.hasAttribute("http-equiv")?"http-equiv":"name").toLowerCase()]=p}return q}function f(n,p,o){n.removeStyle(p);if(n.getComputedStyle(p)!=o){n.setStyle(p,o)}}var a=function(p,n,o){return{type:"hbox",padding:0,widths:["60%","40%"],children:[CKEDITOR.tools.extend({type:"text",id:p,label:d[n]},o||{},1),{type:"button",id:p+"Choose",label:d.chooseColor,className:"colorChooser",onClick:function(){var q=this;l("colordialog",function(r){var s=q.getDialog();s.getContentElement(s._.currentTabId,p).setValue(r.getContentElement("picker","selectedColor").getValue())})}}]}};var i="javascript:void((function(){"+encodeURIComponent("document.open();"+(CKEDITOR.env.isCustomDomain()?"document.domain='"+document.domain+"';":"")+'document.write( \'<html style="background-color: #ffffff; height: 100%"><head></head><body style="width: 100%; height: 100%; margin: 0px">'+d.previewHtml+"</body></html>' );document.close();")+"})())";return{title:d.title,minHeight:330,minWidth:500,onShow:function(){var q=j.document,p=q.getElementsByTag("html").getItem(0),o=q.getHead(),n=q.getBody();c=g(q);this.setupContent(q,p,o,n)},onHide:function(){c={}},onOk:function(){var q=j.document,p=q.getElementsByTag("html").getItem(0),o=q.getHead(),n=q.getBody();this.commitContent(q,p,o,n)},contents:[{id:"general",label:h.generalTab,elements:[{type:"text",id:"title",label:d.docTitle,setup:function(n){this.setValue(n.getElementsByTag("title").getItem(0).data("cke-title"))},commit:function(r,q,p,n,o){if(o){return}r.getElementsByTag("title").getItem(0).data("cke-title",this.getValue())}},{type:"hbox",children:[{type:"select",id:"dir",label:h.langDir,style:"width: 100%",items:[[h.notSet,""],[h.langDirLtr,"ltr"],[h.langDirRtl,"rtl"]],setup:function(q,p,o,n){this.setValue(n.getDirection()||"")},commit:function(q,p,o,n){var r=this.getValue();if(r){n.setAttribute("dir",r)}else{n.removeAttribute("dir")}n.removeStyle("direction")}},{type:"text",id:"langCode",label:h.langCode,setup:function(o,n){this.setValue(n.getAttribute("xml:lang")||n.getAttribute("lang")||"")},commit:function(r,q,p,n,o){if(o){return}var s=this.getValue();if(s){q.setAttributes({"xml:lang":s,lang:s})}else{q.removeAttributes({"xml:lang":1,lang:1})}}}]},{type:"hbox",children:[{type:"select",id:"charset",label:d.charset,style:"width: 100%",items:[[h.notSet,""],[d.charsetASCII,"us-ascii"],[d.charsetCE,"iso-8859-2"],[d.charsetCT,"big5"],[d.charsetCR,"iso-8859-5"],[d.charsetGR,"iso-8859-7"],[d.charsetJP,"iso-2022-jp"],[d.charsetKR,"iso-2022-kr"],[d.charsetTR,"iso-8859-9"],[d.charsetUN,"utf-8"],[d.charsetWE,"iso-8859-1"],[d.other,"other"]],"default":"",onChange:function(){this.getDialog().selectedCharset=this.getValue()!="other"?this.getValue():"";e.call(this)},setup:function(){this.metaCharset=("charset" in c);var o=m(this.metaCharset?"charset":"content-type",1,1),p=o.call(this);!this.metaCharset&&p.match(/charset=[^=]+$/)&&(p=p.substring(p.indexOf("=")+1));if(p){this.setValue(p.toLowerCase());if(!this.getValue()){this.setValue("other");var n=this.getDialog().getContentElement("general","charsetOther");n&&n.setValue(p)}this.getDialog().selectedCharset=p}e.call(this)},commit:function(u,r,q,o,p){if(p){return}var t=this.getValue(),n=this.getDialog().getContentElement("general","charsetOther");t=="other"&&(t=n?n.getValue():"");t&&!this.metaCharset&&(t=(c["content-type"]?c["content-type"].getAttribute("content").split(";")[0]:"text/html")+"; charset="+t);var s=k(this.metaCharset?"charset":"content-type",1,t);s.call(this,u,r,q)}},{type:"text",id:"charsetOther",label:d.charsetOther,onChange:function(){this.getDialog().selectedCharset=this.getValue()}}]},{type:"hbox",children:[{type:"select",id:"docType",label:d.docType,style:"width: 100%",items:[[h.notSet,""],["XHTML 1.1",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">'],["XHTML 1.0 Transitional",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'],["XHTML 1.0 Strict",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'],["XHTML 1.0 Frameset",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">'],["HTML 5","<!DOCTYPE html>"],["HTML 4.01 Transitional",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">'],["HTML 4.01 Strict",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">'],["HTML 4.01 Frameset",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">'],["HTML 3.2",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">'],["HTML 2.0",'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">'],[d.other,"other"]],onChange:e,setup:function(){if(j.docType){this.setValue(j.docType);if(!this.getValue()){this.setValue("other");var n=this.getDialog().getContentElement("general","docTypeOther");n&&n.setValue(j.docType)}}e.call(this)},commit:function(t,r,q,o,p){if(p){return}var s=this.getValue(),n=this.getDialog().getContentElement("general","docTypeOther");j.docType=s=="other"?(n?n.getValue():""):s}},{type:"text",id:"docTypeOther",label:d.docTypeOther}]},{type:"checkbox",id:"xhtmlDec",label:d.xhtmlDec,setup:function(){this.setValue(!!j.xmlDeclaration)},commit:function(r,q,p,n,o){if(o){return}if(this.getValue()){j.xmlDeclaration='<?xml version="1.0" encoding="'+(this.getDialog().selectedCharset||"utf-8")+'"?>';q.setAttribute("xmlns","http://www.w3.org/1999/xhtml")}else{j.xmlDeclaration="";q.removeAttribute("xmlns")}}}]},{id:"design",label:d.design,elements:[{type:"hbox",widths:["60%","40%"],children:[{type:"vbox",children:[a("txtColor","txtColor",{setup:function(q,p,o,n){this.setValue(n.getComputedStyle("color"))},commit:function(r,q,p,n,o){if(this.isChanged()||o){n.removeAttribute("text");var s=this.getValue();if(s){n.setStyle("color",s)}else{n.removeStyle("color")}}}}),a("bgColor","bgColor",{setup:function(q,p,o,n){var r=n.getComputedStyle("background-color")||"";this.setValue(r=="transparent"?"":r)},commit:function(r,q,p,n,o){if(this.isChanged()||o){n.removeAttribute("bgcolor");var s=this.getValue();if(s){n.setStyle("background-color",s)}else{f(n,"background-color","transparent")}}}}),{type:"hbox",widths:["60%","40%"],padding:0,children:[{type:"text",id:"bgImage",label:d.bgImage,setup:function(q,p,o,n){var r=n.getComputedStyle("background-image")||"";if(r=="none"){r=""}else{r=r.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(u,s,t){return t})}this.setValue(r)},commit:function(q,p,o,n){n.removeAttribute("background");var r=this.getValue();if(r){n.setStyle("background-image","url("+r+")")}else{f(n,"background-image","none")}}},{type:"button",id:"bgImageChoose",label:h.browseServer,style:"display:inline-block;margin-top:10px;",hidden:true,filebrowser:"bg:bgImage"}]},{type:"checkbox",id:"bgFixed",label:d.bgFixed,setup:function(q,p,o,n){this.setValue(n.getComputedStyle("background-attachment")=="fixed")},commit:function(q,p,o,n){if(this.getValue()){n.setStyle("background-attachment","fixed")}else{f(n,"background-attachment","scroll")}}}]},{type:"vbox",children:[{type:"html",id:"marginTitle",html:'<div style="text-align: center; margin: 0px auto; font-weight: bold">'+d.margin+"</div>"},{type:"text",id:"marginTop",label:d.marginTop,style:"width: 80px; text-align: center; margin: 0px auto",controlStyle:"text-align: center",setup:function(q,p,o,n){this.setValue(n.getStyle("margin-top")||n.getAttribute("margintop")||"")},commit:b("top"),onLoad:function(){this.getElement().getParent().setStyle("text-align","center")}},{type:"hbox",children:[{type:"text",id:"marginLeft",label:d.marginLeft,style:"width: 80px; text-align: center; margin: 0px auto",controlStyle:"text-align: center",setup:function(q,p,o,n){this.setValue(n.getStyle("margin-left")||n.getAttribute("marginleft")||"")},commit:b("left"),onLoad:function(){this.getElement().getParent().setStyle("text-align","center")}},{type:"text",id:"marginRight",label:d.marginRight,style:"width: 80px; text-align: center; margin: 0px auto",controlStyle:"text-align: center",setup:function(q,p,o,n){this.setValue(n.getStyle("margin-right")||n.getAttribute("marginright")||"")},commit:b("right"),onLoad:function(){this.getElement().getParent().setStyle("text-align","center")}}]},{type:"text",id:"marginBottom",label:d.marginBottom,style:"width: 80px; text-align: center; margin: 0px auto",controlStyle:"text-align: center",setup:function(q,p,o,n){this.setValue(n.getStyle("margin-bottom")||n.getAttribute("marginbottom")||"")},commit:b("bottom"),onLoad:function(){this.getElement().getParent().setStyle("text-align","center")}}]}]}]},{id:"meta",label:d.meta,elements:[{type:"textarea",id:"metaKeywords",label:d.metaKeywords,setup:m("keywords"),commit:k("keywords")},{type:"textarea",id:"metaDescription",label:d.metaDescription,setup:m("description"),commit:k("description")},{type:"text",id:"metaAuthor",label:d.metaAuthor,setup:m("author"),commit:k("author")},{type:"text",id:"metaCopyright",label:d.metaCopyright,setup:m("copyright"),commit:k("copyright")}]},{id:"preview",label:h.preview,elements:[{type:"html",id:"previewHtml",html:'<iframe src="'+i+'" style="width: 100%; height: 310px" hidefocus="true" frameborder="0" id="cke_docProps_preview_iframe"></iframe>',onLoad:function(){this.getDialog().on("selectPage",function(o){if(o.data.page=="preview"){var n=this;setTimeout(function(){var s=CKEDITOR.document.getById("cke_docProps_preview_iframe").getFrameDocument(),r=s.getElementsByTag("html").getItem(0),q=s.getHead(),p=s.getBody();n.commitContent(s,r,q,p,1)},50)}});CKEDITOR.document.getById("cke_docProps_preview_iframe").getAscendant("table").setStyle("height","100%")}}]}]}});